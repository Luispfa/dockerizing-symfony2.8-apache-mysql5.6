<IfModule mod_ssl.c>
    Define project_path_web /var/www/html/sf-web/web
    Define project_path_admin /var/www/html/sf-admin/web
    Define ssl_path /etc/apache2/ssl
    <VirtualHost _default_:443>
        ServerName admin-local.juntadeaccionistas.es
        ServerAlias admin-local.juntadeaccionistas.es
        DocumentRoot ${project_path_admin}

        ErrorLog ${APACHE_LOG_DIR}/admin-error-ssl-junta.log
        CustomLog ${APACHE_LOG_DIR}/admin-access-ssl-junta.log combined

        # Enable/Disable SSL for this virtual host.
        SSLEngine on

        SSLCertificateFile ${ssl_path}/wildcard.juntadeaccionistas.es.crt
        SSLCertificateChainFile ${ssl_path}/ca.bundle.openprovider.esentialssl.wildcard
        SSLCertificateKeyFile ${ssl_path}/wildcard.juntadeaccionistas.es.key
        SSLVerifyDepth 2

        SSLHonorCipherOrder On
        SSLcipherSuite HIGH:!ADH
        SSLProtocol all -SSLv2 -SSLv3
        SSLVerifyDepth 2

        <LocationMatch /home/certificateLogin>
            SSLVerifyClient optional_no_ca
            SSLOptions +StdEnvVars +ExportCertData
        </LocationMatch>

        <Location /diagnostics.php>
            SSLVerifyClient optional_no_ca
            SSLOptions +StdEnvVars +ExportCertData
        </Location>

	<FilesMatch "\.(cgi|shtml|phtml|php)$">
            SSLOptions +StdEnvVars
        </FilesMatch>

        BrowserMatch ".*MSIE.*" \
            nokeepalive ssl-unclean-shutdown \
            downgrade-1.0 force-response-1.0

     </VirtualHost>

<VirtualHost _default_:443>
        ServerName juntadeaccionistas.es
        ServerAlias *.juntadeaccionistas.es
        DocumentRoot ${project_path_web}

        ErrorLog ${APACHE_LOG_DIR}/web_error-ssl-junta.log
        CustomLog ${APACHE_LOG_DIR}/web_access-ssl-junta.log combined

        # Enable/Disable SSL for this virtual host.
        SSLEngine on

        SSLCertificateFile ${ssl_path}/wildcard.juntadeaccionistas.es.crt
        SSLCertificateChainFile ${ssl_path}/ca.bundle.openprovider.esentialssl.wildcard
        SSLCertificateKeyFile ${ssl_path}/wildcard.juntadeaccionistas.es.key
        SSLVerifyDepth 2

        SSLHonorCipherOrder On
        SSLcipherSuite HIGH:!ADH
        SSLProtocol all -SSLv2 -SSLv3
        SSLVerifyDepth 2

        <LocationMatch /home/certificateLogin>
            SSLVerifyClient optional_no_ca
            SSLOptions +StdEnvVars +ExportCertData
        </LocationMatch>

        <Location /diagnostics.php>
            SSLVerifyClient optional_no_ca
            SSLOptions +StdEnvVars +ExportCertData
        </Location>

	<FilesMatch "\.(cgi|shtml|phtml|php)$">
            SSLOptions +StdEnvVars
        </FilesMatch>

        BrowserMatch ".*MSIE.*" \
            nokeepalive ssl-unclean-shutdown \
            downgrade-1.0 force-response-1.0

     </VirtualHost>
</IfModule>
