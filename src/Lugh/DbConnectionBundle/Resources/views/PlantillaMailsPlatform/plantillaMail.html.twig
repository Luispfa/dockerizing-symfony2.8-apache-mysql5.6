<div class="row" >

    <div class="span12" id='view-container'>

        <div class="widget widget-table">

            <div class="widget-header">

                <h3>
                    <i class="icon-th-list"></i>
                    Plantilla Mails
                </h3>

                <div class="widget-actions">
                    <a onclick="(function(){
                        $.msgAlert ({
                            type: 'warning'
                            , title: 'Advertencia!'
                            , text: 'El proceso recompilara el estilo de la plataforma a partir del estilo template activo, desea proceder?'
                            , callback: function () {
                                setTimeout(function(){ removeStyle('{{ path('_plantillamailsplatform_remove') }}','{{style}}','{{ path( '_plantillamailsplatform_plantilla',{'platform_id': platform_id}) }}','view-container'); }, 1000);
                            }
                        });
                    })()" data-toggle="modal"  type="button" class="btn btn-secondary btn-small accordion-toggle">
                        <i class="icon-plus"></i> Rebuild from Style
                    </a>
                </div>

            </div>
            <input type="hidden" name="trad_platform" value="{{ platform_id }}" />

            <div class="widget-content">

                <table id="crontab_file" class="table table-striped table-bordered responsive">
                    <thead>
                        <tr>
                            <th>key</th>
                            <th>Config</th>

                        </tr>
                    </thead>

                    <tbody>
                        {% set config = 'html_' ~ widget.id %}
                        <input type="hidden" name="id[html][]" value="{{ widget.id }}" />
                        <tr class ="gradeA">
                            <td>
                                {{ widget.clase }}
                            </td>
                            <td id='plantilla-content'>
                                    {{ form_widget(attribute(widget.html,config)) }}

                            </td>
                        </tr>
                    </tbody>

                </table>




                <script>
                tinyMCE.init({
                    theme: "modern",
                    skin: 'light',
                    mode: "exact",
                    plugins: "autoresize,code,codemirror,fullpage",
                    elements : 'form_html_html',
                    element_format : "html",
                    codemirror:{
                        indentOnInit: true,
                        path: 'CodeMirror',
                    },
                    theme_advanced_toolbar_location : "top",
                    theme_advanced_buttons1 : "bold,italic,underline,strikethrough,separator,"
                    + "justifyleft,justifycenter,justifyright,justifyfull,formatselect,"
                    + "bullist,numlist,outdent,indent",
                    theme_advanced_buttons2 : "link,unlink,anchor,image,separator,"
                    +"undo,redo,cleanup,code,separator,sub,sup,charmap,code",
                    theme_advanced_buttons3 : "fullpage",
                    width: '100%',
                    height: 300,
                    autoresize_min_height: 300,
                    autoresize_max_height: 500,
                    convert_urls: false

                });
                if (tinyMCE.editors.length>0) {
                    tinyMCE.execCommand('mceFocus', true, 'form_html_html');
                    tinyMCE.execCommand('mceRemoveEditor',true, 'form_html_html');
                    tinyMCE.execCommand('mceAddEditor',true, 'form_html_html');
                }


                </script>
                <table  class="table table-striped table-bordered responsive">
                    <thead>
                        <tr>
                            <th>Actions</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr>
                            <th>
                                <button type="button" class="btn btn-primary btn-large" onclick="saveMailTemplate2('{{ path('_plantillamailsplatform_save') }}','{{ path( '_plantillamailsplatform_plantilla',{'platform_id': platform_id}) }}','content'); return false;">Save changes</button>
                                <button class="btn btn-large">Cancel</button>
                            </th>
                        </tr>
                    </tbody>
                </table>

            </div><!-- /widget-content -->

        </div>

    </div> <!-- /span12 -->

</div> <!-- /row -->
