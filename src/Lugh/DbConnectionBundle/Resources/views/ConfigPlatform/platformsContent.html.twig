<script src="{{ asset('bundles/lughdbconnection/js/configPlatforms.js') }} "></script> 

<table id="crontab_file" class="table table-striped table-bordered responsive">
    <thead>
        <tr>
            <th>Host</th>
            <th>Parametros</th>
            <th>Usuarios</th>
            <th>Mails</th>
            <th>Plantilla Mails</th>
            <th>Estilo</th>
            <th>Puntos</th>
            <th>Asistencia V.</th>
            <th>Traducciones</th>
            <th>Estadísticas</th>
            <th>Reiniciar</th>
        </tr>
    </thead>

    <tbody>
        {% for platform in platforms %} 
            <tr class ="gradeA">
                <td>
                    <div class="input">
                        {{ platform.host }}
                    </div>
                </td>
                <td>
                    <button class="btn" type="button" onclick="LoadContent('{{ path( '_configplatform_parameters', {'platform_id' : platform.id}) }}', 'content');
                            return false;">
                        Parametros
                    </button>
                </td>
                <td>
                    <button class="btn" type="button" onclick="LoadContent('{{ path( '_configusers_edit_users', {'platform_id' : platform.id}) }}', 'main_down_div');
                            return false;">
                        Usuarios
                    </button>
                </td>
                <td>
                    <button class="btn" type="button" onclick="LoadContent('{{ path( '_mailsplatform_mails', {'platform_id' : platform.id}) }}', 'content');
                            return false;">
                        Mails
                    </button>
                </td>
                <td>
                    <button class="btn" type="button" onclick="LoadContent('{{ path( '_plantillamailsplatform_plantilla', {'platform_id' : platform.id}) }}', 'content');
                            return false;">
                        Plant. Mails
                    </button>
                </td>
                <td>
                    <button class="btn" type="button" onclick="LoadContent('{{ path( '_styleplatform_colors_content', {'platform_id' : platform.id}) }}', 'content');
                            return false;">
                        Estilo
                    </button>
                </td>
                <td>
                    <button class="btn" type="button" onclick="LoadContent('{{ path( '_puntosplatform_puntos', {'platform_id' : platform.id}) }}', 'content');
                            return false;">
                        Voto
                    </button>
                </td>
                <td>
                    <button class="btn" type="button" onclick="LoadContent('{{ path( '_virtualplatform_parameters', {'platform_id' : platform.id}) }}', 'content');
                            return false;">
                        Asist. Virual
                    </button>
                </td>
                <td>
                    <button class="btn" type="button" onclick="LoadContent('{{ path( '_translationsplatform_translations', {'platform_id' : platform.id}) }}', 'content');
                            return false;">
                        Traducciones
                    </button>
                </td>
                {#<td>
                    <button class="btn" type="button" onclick="LoadContent('{{ path( '_templatesplatform_templates', {'platform_id' : platform.id}) }}', 'content');
                            return false;">
                        Template
                    </button>
                </td>#}
                <td>
                    <a href="#pdfModal" data-toggle="modal" data-platform_id="{{ platform.id }}" class="btn open-ResetDialog">Estadísticas</a>
                </td>
                <td>
                    <div class="">								
                            <a href="#myModal" data-toggle="modal" data-platform_id="{{ platform.id }}" class="btn open-ResetDialog">Reiniciar</a>
                    </div>
                </td>
            </tr>
        {% endfor%} 
    </tbody>

</table>

<div class="modal fade hide" id="pdfModal">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h3>Generar pdf</h3>
    </div>
    <form id="PdfPlatformForm" action="statistics" target="_blank">
        <div class="modal-body">
            <p>Generará un pdf con todos los datos estadísticos de la plataforma. Se pueden dejar las fechas vacías para usar los valores predeterminados.</p>
            <div class="form-group">
                <label for="startdate">Fecha de inicio</label>
                <input type="text" name="startdate" id="startdate" value="" placeholder="dd/mm/yyyy" />
                <label for="enddate">Fecha de fin</label>
                <input type="text" name="enddate"   id="enddate"   value="" placeholder="dd/mm/yyyy" />
                <input type="hidden" name="platform_id" id="platform_id" value=""/>
                <label for="databaseName">Base de datos de comparación</label>
                <input type="text" name="databaseName"   id="databaseName"   value="" />
                </select>
            </div>
        </div>
        <div class="modal-footer">
            <a href="#" class="btn" data-dismiss="modal">Close</a>
            <button class="btn btn-primary" type="submit" onclick="$('#pdfModal').modal('toggle')">
                Generar
            </button>
    </div>
    </form>
</div>

<div class="modal fade hide" id="myModal">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h3>Reiniciar Plataforma</h3>
    </div>
    <div class="modal-body">
        <p>Eliminará todos los datos de la plataforma, exceptuando los usuarios y parametros.</p>

        <p>Por favor introduzca esta rista de digitos: {{verifnum}}</p>
        <form id="retesePlatformForm">
            <input type="text" name="numVerifInput" id="numVerifInput" onpaste="return false;" value=""/>
            <input type="hidden" name="numVerif" id="numVerif" value="{{verifnum}}"/>
            <input type="hidden" name="platform_id" id="platform_id" value=""/>
        </form>
        
    </div>
    <div class="modal-footer">
        <a href="#" class="btn" data-dismiss="modal">Close</a>
        <button class="btn btn-primary" type="button" 
                onclick="resetPlatform('{{ path('_configplatform_reset') }}',$('#retesePlatformForm'), $('#myModal'), $('#numVerifInput')); return false;">
            Reiniciar
        </button>
    </div>
</div>