// Generated by CoffeeScript 1.7.1
(function() {
  'use strict';
  angular.module('home', ['ngRoute', 'ngAnimate', 'ui.bootstrap','ngStorage',
      'textAngular', 'ui.tree', 'ngTagsInput',  
      'app.ui.services', 'main.sharedControllers',
      'app.ui.form.directives', 'app.localization','sharedFilters',
      'app.page.ctrls', 'homeControllers','homeDirectives',
      'sharedDirectives','sharedControllers','sharedServices',
      'vcRecaptcha','homeServices', 'app.services.accionistas','app.form.validation']).config([
    '$routeProvider', function($routeProvider) {
      return $routeProvider.when('/', {
        redirectTo: '/app/inicio'
      }).when('/dashboard', {
        templateUrl: 'home/views/dashboard.html'
      }).when('/app/inicio', {
        templateUrl: WebDefault + '/home/views/app/inicio.html',
        resolve: {
            apprequest: function(paramRequest){
                return paramRequest.load(true);
            }
        }
      }).when('/app/forgot',{
        templateUrl: WebDefault + '/home/views/app/forgot.html',
        resolve: {
          apprequest: function(paramRequest){
            return paramRequest.load(true);
          }
        }
      }).when('/app/registro', {
        templateUrl: WebDefault +'/home/views/app/registro.html',
        resolve: {
            apprequest: function(paramRequest){
                return paramRequest.load(true);
            }
        }
      }).when('/app/registroCertificado', {
        templateUrl: WebDefault + '/home/views/app/registroCertificado.html',
        resolve: {
            apprequest: function(paramRequest){
                return paramRequest.load(true);
            }
        }
      }).when('/app/contactar', {
        templateUrl: WebDefault + '/home/views/app/contactar.html'
      }).when('/app/requisitos', {
        templateUrl: WebDefault + '/home/views/app/requisitos.html'
      }).when('/app/avisoLegal', {
        templateUrl: WebDefault +'/home/views/app/avisoLegal.html'
      }).when('/app/retornar', {
        templateUrl: WebDefault +'/home/views/app/retornar.html',
        resolve: {
            apprequest: function(paramRequest){
                return paramRequest.load(true);
            }
        }
      }).when('/app/pendiente', {
        templateUrl: WebDefault + '/home/views/app/pendiente.html',
        resolve: {
            apprequest: function(paramRequest){
                return paramRequest.load(true);
            }
        }
      }).when('/404', {
        templateUrl: WebDefault + '/home/sharedviews/pages/404.html'
      }).when('/pages/500', {
        templateUrl: WebDefault + '/home/sharedviews/pages/500.html'  
      }).otherwise({
        redirectTo: '/404'
      });
    }
  ]);
  
  function paramrequestfunc($http, $localStorage, $q){
        var deferred = $q.defer();
        $http.get(WebDefault +'/home/paramrequest')
        .success(function(paramrequest) {
            //if (apprequest.voto !== undefined)
            {
                var params = {};
                angular.forEach(paramrequest, function(value, key){
                    params[value['key_param']] = value['value_param'];
                });
                reset(params,$localStorage);
                $localStorage.$default(params);
                deferred.resolve(params);
            }
        })
        .error(function() {
            deferred.reject();
        });
        return deferred.promise;
  };
  
  function reset(apprequest,$localStorage) {
        angular.forEach(apprequest, function(value, key) {
           delete $localStorage[key];
        });
  };
  
 
  
}).call(this);

